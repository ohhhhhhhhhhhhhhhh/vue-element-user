{"version":3,"sources":["webpack:///./src/components/home.vue?93ce","webpack:///./src/components/home.vue?2e33","webpack:///./src/bmpgl.js","webpack:///./src/api/getEvents.js","webpack:///src/components/home.vue","webpack:///./src/components/home.vue?4f77","webpack:///./src/components/home.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","_v","_s","numTotal","nativeOn","$event","eventTotal","slot","percTotal","_e","numDone","percDone","toFixed","eventDone","numIng","percIng","eventIng","numDanger","percDanger","eventDanger","staticClass","ref","staticRenderFns","BMPGL","ak","Promise","resolve","reject","window","init","BMapGL","script","document","createElement","type","src","onerror","head","appendChild","getEvents","request","url","method","component"],"mappings":"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","file":"js/chunk-196609aa.59820779.js","sourcesContent":["export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticStyle:{\"margin-right\":\"-6px\",\"margin-top\":\"-20px\"}},[_c('el-aside',{attrs:{\"width\":\"240px\"}},[_vm._v(\"Aside\")]),_c('el-container',[_c('el-header',{attrs:{\"height\":\"130px\"}},[_c('div',[_c('span',{staticStyle:{\"display\":\"flex\",\"margin-bottom\":\"5px\"}},[_c('el-popover',{attrs:{\"placement\":\"top-start\",\"title\":\"事件数:\",\"width\":\"200\",\"trigger\":\"hover\"}},[_c('span',[_vm._v(\"事件总数：\"+_vm._s(this.numTotal))]),_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.eventTotal()}},slot:\"reference\"},[_vm._v(\"事件数\")])],1),(this.loading)?_c('el-progress',{attrs:{\"percentage\":this.percTotal}}):_vm._e()],1),_c('span',{staticStyle:{\"display\":\"flex\",\"margin-bottom\":\"5px\"}},[_c('el-popover',{attrs:{\"placement\":\"top-start\",\"title\":\"已解决:\",\"width\":\"200\",\"trigger\":\"hover\"}},[_c('span',[_vm._v(\"已解决事件数：\"+_vm._s(this.numDone)),_c('br'),_vm._v(\"占比：\"+_vm._s(this.percDone.toFixed(1))+\"%\")]),_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"success\"},nativeOn:{\"click\":function($event){return _vm.eventDone()}},slot:\"reference\"},[_vm._v(\"已解决\")])],1),(this.loading)?_c('el-progress',{attrs:{\"percentage\":this.percDone,\"status\":\"success\"}}):_vm._e()],1),_c('span',{staticStyle:{\"display\":\"flex\",\"margin-bottom\":\"5px\"}},[_c('el-popover',{attrs:{\"placement\":\"top-start\",\"title\":\"处理中:\",\"width\":\"200\",\"trigger\":\"hover\"}},[_c('span',[_vm._v(\"待解决处理中：\"+_vm._s(this.numIng)),_c('br'),_vm._v(\"占比：\"+_vm._s(this.percIng.toFixed(1))+\"%\")]),_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"warning\"},nativeOn:{\"click\":function($event){return _vm.eventIng()}},slot:\"reference\"},[_vm._v(\"处理中\")])],1),(this.loading)?_c('el-progress',{attrs:{\"percentage\":this.percIng,\"status\":\"warning\"}}):_vm._e()],1),_c('span',{staticStyle:{\"display\":\"flex\",\"margin-bottom\":\"5px\"}},[_c('el-popover',{attrs:{\"placement\":\"top-start\",\"title\":\"升级数:\",\"width\":\"200\",\"trigger\":\"hover\"}},[_c('span',[_vm._v(\"事件升级数：\"+_vm._s(this.numDanger)),_c('br'),_vm._v(\"占比：\"+_vm._s(this.percDanger.toFixed(1))+\"%\")]),_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"danger\"},nativeOn:{\"click\":function($event){return _vm.eventDanger()}},slot:\"reference\"},[_vm._v(\"升级数\")])],1),(this.loading)?_c('el-progress',{attrs:{\"percentage\":this.percDanger,\"status\":\"exception\"}}):_vm._e()],1)])]),_c('el-main',[_c('div',{staticClass:\"map\"},[_c('div',{ref:\"map\",staticClass:\"allmap\",attrs:{\"id\":\"map_container\"}})])]),_c('el-footer',{attrs:{\"height\":\"100px\"}},[_vm._v(\"Footer\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// bmpgl.js\nexport function BMPGL(ak) {\n  return new Promise(function(resolve, reject) {\n    window.init = function() {\n      // eslint-disable-next-line\n      resolve(BMapGL)\n    }\n    const script = document.createElement('script')\n    script.type = 'text/javascript'\n    script.src = `http://api.map.baidu.com/api?v=1.0&type=webgl&ak=${ak}&callback=init`\r\n\t//script.src = `http://api.map.baidu.com/api?v=2.0&ak=${ak}&callback=init`\r\n\tscript.onerror = reject\n    document.head.appendChild(script)\n  })\n}","import request from '@/utils/request'\r\n\r\n// 获取首页要展示的事件数\r\nexport function getEvents () {\n  return request({\n    url: '/getEvents',\n    method: 'GET'\n  })\n}","<template>\r\n\t<el-container style='margin-right: -6px; margin-top: -20px;'>\r\n\t  <el-aside width=\"240px\">Aside</el-aside>\r\n\t  <el-container>\r\n\t    <el-header height='130px'>\r\n\t\t\t<div>\r\n\t\t\t\t<span style=\"display: flex; margin-bottom: 5px;\">\r\n\t\t\t\t\t<el-popover\r\n\t\t\t\t\t    placement=\"top-start\"\r\n\t\t\t\t\t    title=\"事件数:\"\r\n\t\t\t\t\t    width=\"200\"\r\n\t\t\t\t\t    trigger=\"hover\">\r\n\t\t\t\t\t\t<span>事件总数：{{this.numTotal}}</span>\r\n\t\t\t\t\t    <el-button slot=\"reference\" size=\"mini\" style=\"margin-right: 10px;\" type=\"primary\" @click.native=\"eventTotal()\">事件数</el-button>\r\n\t\t\t\t\t  </el-popover>\r\n\t\t\t\t\t<el-progress v-if='this.loading' :percentage=\"this.percTotal\"></el-progress>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style=\"display: flex; margin-bottom: 5px;\">\r\n\t\t\t\t\t<el-popover\r\n\t\t\t\t\t    placement=\"top-start\"\r\n\t\t\t\t\t    title=\"已解决:\"\r\n\t\t\t\t\t    width=\"200\"\r\n\t\t\t\t\t    trigger=\"hover\">\r\n\t\t\t\t\t\t<span>已解决事件数：{{this.numDone}}<br/>占比：{{this.percDone.toFixed(1)}}%</span>\r\n\t\t\t\t\t    <el-button slot=\"reference\" size=\"mini\" style=\"margin-right: 10px;\" type=\"success\" @click.native=\"eventDone()\">已解决</el-button>\r\n\t\t\t\t\t  </el-popover>\r\n\t\t\t\t\t<el-progress v-if=\"this.loading\" :percentage=\"this.percDone\" status=\"success\"></el-progress>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style=\"display: flex; margin-bottom: 5px;\">\r\n\t\t\t\t\t<el-popover\r\n\t\t\t\t\t    placement=\"top-start\"\r\n\t\t\t\t\t    title=\"处理中:\"\r\n\t\t\t\t\t    width=\"200\"\r\n\t\t\t\t\t    trigger=\"hover\">\r\n\t\t\t\t\t\t<span>待解决处理中：{{this.numIng}}<br/>占比：{{this.percIng.toFixed(1)}}%</span>\r\n\t\t\t\t\t    <el-button slot=\"reference\" size=\"mini\" style=\"margin-right: 10px;\" type=\"warning\" @click.native=\"eventIng()\">处理中</el-button>\r\n\t\t\t\t\t  </el-popover>\r\n\t\t\t\t\t<el-progress v-if=\"this.loading\" :percentage=\"this.percIng\" status=\"warning\"></el-progress>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style=\"display: flex; margin-bottom: 5px;\">\r\n\t\t\t\t\t<el-popover\r\n\t\t\t\t\t    placement=\"top-start\"\r\n\t\t\t\t\t    title=\"升级数:\"\r\n\t\t\t\t\t    width=\"200\"\r\n\t\t\t\t\t    trigger=\"hover\">\r\n\t\t\t\t\t\t<span>事件升级数：{{this.numDanger}}<br/>占比：{{this.percDanger.toFixed(1)}}%</span>\r\n\t\t\t\t\t    <el-button slot=\"reference\" size=\"mini\" style=\"margin-right: 10px;\" type=\"danger\" @click.native=\"eventDanger()\">升级数</el-button>\r\n\t\t\t\t\t  </el-popover>\r\n\t\t\t\t\t<el-progress v-if=\"this.loading\" :percentage=\"this.percDanger\" status=\"exception\"></el-progress>\r\n\t\t\t\t</span>\t\r\n\t\t\t</div>\r\n\t\t</el-header>\r\n\t    <el-main>\r\n\t\t\t<div class=\"map\">\r\n\t\t\t\t<!--创建地图容器-->\r\n\t\t\t    <div id=\"map_container\" class=\"allmap\" ref=\"map\"></div>\r\n\t\t\t</div>\r\n\t\t</el-main>\r\n\t    <el-footer height='100px'>Footer</el-footer>\r\n\t  </el-container>\r\n\t</el-container>\n</template>\n\n<script>\r\n\timport { BMPGL } from '../bmpgl.js';\r\n\t//import { MP } from '../map.js';\r\n\timport { getEvents } from '../api/getEvents.js';\r\n\t//import { ComplexCustomOverlay } from '../assets/marker/ComplexCustomOverlay.js';\r\n\t//import '../assets/marker/ComplexCustomOverlay.css';\r\n\t//import { RadarOverlay } from '../assets/radar/Radar.js';\r\n\t//import { CircleShow } from '../assets/circle/Circle.js'\r\n\t//import * as echarts from \"echarts\";\r\n\t//import \"echarts/extension/bmap/bmap\";\r\n\t//require('echarts/extension/bmap/bmap');\r\n\t//import { loadBMap } from '../assets/radar/map.js'\r\n\t//import mapvgl from 'mapvgl'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\t\r\n\t\t\t\tpercDanger: 0,\r\n\t\t\t\tpercDone: 0,\r\n\t\t\t\tpercIng: 0,\r\n\t\t\t\tpercTotal: 100,\r\n\t\t\t\t\r\n\t\t\t\tnumDanger: 0,\r\n\t\t\t\tnumDone: 0,\r\n\t\t\t\tnumIng: 0,\r\n\t\t\t\tnumTotal: 0,\r\n\t\t\t\t\r\n\t\t\t\twindowInfo: '正在加载中，请稍等...',\r\n\t\t\t\tcolor: '',\r\n\t\t\t\t\r\n\t\t\t\tak: \"rQxHPQX1ua21rWnXzTbUh5KSSUbnefxR\", // 百度的地图密钥\r\n\t\t\t\tmyMap: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t\r\n\t\t\tgetEvents()\r\n\t\t\t.then(res=>{\r\n\t\t\t\t//console.log(res);\r\n\t\t\t\tthis.numDanger = res.data.danger;\r\n\t\t\t\t//console.log(res.data.ing);\r\n\t\t\t\t//console.log(this.numIng);\r\n\t\t\t\tthis.numDone = res.data.done;\r\n\t\t\t\tthis.numIng = res.data.ing;\r\n\t\t\t\t//console.log(this.numIng);\r\n\t\t\t\tthis.numTotal = this.numDanger + this.numDone + this.numIng;\r\n\t\t\t\t\r\n\t\t\t\tthis.percDanger = this.numDanger / this.numTotal *100;\r\n\t\t\t\t//console.log(this.percDanger);\r\n\t\t\t\tthis.percDone = this.numDone / this.numTotal * 100;\r\n\t\t\t\tthis.percIng = this.numIng / this.numTotal * 100;\r\n\t\t\t\t//console.log(this.numTotal);\r\n\t\t\t\t//console.log(this.percIng);\r\n\t\t\t\t\r\n\t\t\t\tthis.loading = true; // 数据加载完成，显示“进度条”\r\n\t\t\t\t\r\n\t\t\t\t// 加载地图镂空线内颜色，和标注的文本\r\n\t\t\t\tif(this.percDanger > 4){\r\n\t\t\t\t\tthis.color = 'red';\r\n\t\t\t\t\tthis.windowInfo = '警告：当前事件升级数占比超过4%';\r\n\t\t\t\t}\r\n\t\t\t\telse if(this.percDone > 60){\r\n\t\t\t\t\tthis.color = 'green';\r\n\t\t\t\t\tthis.windowInfo = '当前事件解决率已达到60%';\r\n\t\t\t\t}\r\n\t\t\t\telse if(this.percIng < 45){ // 36 - 45\r\n\t\t\t\t\tthis.color = 'blue';\r\n\t\t\t\t\tthis.windowInfo = '当前事件较平稳';\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.color = 'yellow';\r\n\t\t\t\t\tthis.windowInfo = '当前待处理事件较多，超过45%';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.initMap(); // 比放在mounted中加载流畅许多！！\r\n\t\t\t\t\r\n\t\t\t\t/*\r\n\t\t\t\tconsole.log(this.percDanger);\r\n\t\t\t\t这里的语句优先于上面的函数执行，因此this.percDanger === 0\r\n\t\t\t\t*/\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(err=>{\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t})\r\n\t\t\t\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t/*\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t　　loadBMap(\"rQxHPQX1ua21rWnXzTbUh5KSSUbnefxR\").then(() => {\r\n\t\t\t   　　this.drawPie()\r\n\t\t\t   　})\r\n\t\t\t})\r\n\t\t\t*/\r\n\t\t},\r\n\t\tbeforeRouteLeave(to, from, next) {\r\n\t\t\t//console.log('beforeRouteLeave');\r\n\t\t\tthis.myMap.destroy();\r\n\t\t\tthis.myMap = null; // 内存溢出的罪魁祸首\r\n\t\t\t//CollectGarbage();\r\n\t\t\t//console.log(this.myMap);\r\n\t\t\tthis.loading = false;\r\n\t\t\tnext();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t    initMap() {\r\n\t\t\t\t\r\n\t\t\t\t/*\r\n\t\t\t\tMP(this.ak)\r\n\t\t\t\t.then((BMap)=>{\r\n\t\t\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\t\t\tclass RadarOverlay extends BMap.Overlay {\r\n\t\t\t\t\t  constructor(point, size) {\r\n\t\t\t\t\t    super();\r\n\t\t\t\t\t    this.point = point;\r\n\t\t\t\t\t    this.size = size;\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t\r\n\t\t\t\t\t  initialize(map) {\r\n\t\t\t\t\t    this._map = map;\r\n\t\t\t\t\t    const template = `<div class=\"radar-box\">\r\n\t\t\t\t\t        <div class=\"radar\">\r\n\t\t\t\t\t          <div class=\"ripple\"></div>\r\n\t\t\t\t\t          <div class=\"ripple\"></div>\r\n\t\t\t\t\t          <div class=\"ripple\"></div>\r\n\t\t\t\t\t        </div>\r\n\t\t\t\t\t      </div>`;\r\n\t\t\t\t\t    const divFragment = document.createRange().createContextualFragment(template);\r\n\t\t\t\t\t    const div = divFragment.querySelectorAll('.radar-box')[0];\r\n\t\t\t\t\t    map.getPanes().markerPane.appendChild(div);\r\n\t\t\t\t\t    this._div = div;\r\n\t\t\t\t\t    return div;\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t\r\n\t\t\t\t\t  draw() {\r\n\t\t\t\t\t    // 根据地理坐标转换为像素坐标，并设置给容器\r\n\t\t\t\t\t    const position = this._map.pointToOverlayPixel(this.point);\r\n\t\t\t\t\t    this._div.style.left = `${position.x - this.size / 2}px`;\r\n\t\t\t\t\t    this._div.style.top = `${position.y - this.size / 2}px`;\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// eslint-disable-next-line no-undef\r\n\t\t\t\t\t      const map = new BMap.Map(this.$refs.map);\r\n\t\t\t\t\t      // eslint-disable-next-line no-undef\r\n\t\t\t\t\t      map.centerAndZoom(new BMap.Point(109.66049, 28.69997), 11);\r\n\t\t\t\t\t      // eslint-disable-next-line no-undef\r\n\t\t\t\t\t      const point = new BMap.Point(109.66049, 28.69997);     \r\n\t\t\t\t\t      map.enableScrollWheelZoom(true);\r\n\t\t\t\t\t// 添加自定义覆盖物   \r\n\t\t\t\t\t      const radar = new RadarOverlay(point, 400);    \r\n\t\t\t\t\t      map.addOverlay(radar);\r\n\t\t\t\t\t    \r\n\t   \r\n\t\t\t\t})\r\n\t\t\t\t.catch(err=>{\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t})\r\n\t\t\t\t*/\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t      // 传入密钥获取地图回调。\r\n\t\t      BMPGL(this.ak)\r\n\t\t\t  \r\n\t\t\t  .then((BMapGL) => {\r\n\t\t\t\t  \r\n\t\t        // 创建地图实例\r\n\t\t        this.myMap = new BMapGL.Map(\"map_container\",{minZoom:10, maxZoom:12});\r\n\t\t        // 创建点坐标 axios => res 获取的初始化定位坐标\r\n\t\t        let point = new BMapGL.Point(109.66049, 28.69997);\r\n\t\t        // 初始化地图，设置中心点坐标和地图级别\r\n\t\t        this.myMap.centerAndZoom(point, 11);\r\n\t\t        //开启鼠标滚轮缩放\r\n\t\t        this.myMap.enableScrollWheelZoom(true);\r\n\t\t        this.myMap.setHeading(64.5);\r\n\t\t        this.myMap.setTilt(30); // 73\r\n\t\t\t\r\n\t\t\t\t// 镂空线\r\n\t\t\t   var bd = new BMapGL.Boundary();\r\n\t\t\t   var that = this;\r\n\t\t\t   bd.get('保靖县', function (rs) {\r\n\t\t\t       // console.log('外轮廓：', rs.boundaries[0]);\r\n\t\t\t       // console.log('内镂空：', rs.boundaries[1]);\r\n\t\t\t       var hole = new BMapGL.Polygon(rs.boundaries, {\r\n\t\t\t           //fillColor: 'blue',\r\n\t\t\t\t\t   fillColor: that.color,\r\n\t\t\t           fillOpacity: 0.2\r\n\t\t\t       });\r\n\t\t\t\t   //console.log(that.color);\r\n\t\t\t       that.myMap.addOverlay(hole);\r\n\t\t\t   });\r\n\t\t\t   \r\n\t\t\t   /*\r\n\t\t\t   // 创建点标记\r\n\t\t\t   // 卡顿，内存溢出\r\n\t\t\t   var marker = new BMapGL.Marker(point);\r\n\t\t\t   //var marker = new BMap.Marker(point);\r\n\t\t\t   map.addOverlay(marker);\r\n\t\t\t   //marker.setAnimation(BMAP_ANIMATION_BOUNCE);\r\n\t\t\t   //marker.setAnimation(BMAP_ANIMATION_DROP); // 坠落动画\r\n\t\t\t   */\r\n\t\t\t   \r\n\t\t\t   // 创建信息窗口\r\n\t\t\t   var opts = {\r\n\t\t\t       width: 200,\r\n\t\t\t       height: 80,\r\n\t\t\t       title: '保靖县'\r\n\t\t\t   };\r\n\t\t\t   var infoWindow = new BMapGL.InfoWindow(this.windowInfo, opts);\r\n\t\t\t   \r\n\t\t\t   \r\n\t\t\t   this.myMap.openInfoWindow(infoWindow, point); // 开启信息窗口\r\n\t\t\t   /*\r\n\t\t\t   // 点标记添加点击事件\r\n\t\t\t   marker.addEventListener('click', function () {\r\n\t\t\t       map.openInfoWindow(infoWindow, point); // 开启信息窗口\r\n\t\t\t   });\r\n\t\t\t   */\r\n\t\t\t   \r\n\t\t\t\t\t\r\n\t\t\t\t\t// 辐射线\r\n\t\t\t          var view = new mapvgl.View({\r\n\t\t\t              map: this.myMap\r\n\t\t\t          });\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  var waveLayer = new mapvgl.CircleLayer({\r\n\t\t\t\t\t\t\t\t\tenablePicked: true,\r\n\t\t\t\t\t\t              selectedColor: '#df4d8c', // 选中项颜色\r\n\t\t\t\t\t\t              autoSelect: true, // 根据鼠标位置来自动设置选中项\r\n\t\t\t\t\t\t              onClick: (e) => { // 点击事件\r\n\t\t\t\t\t\t                  //console.log(e);\r\n\t\t\t\t\t\t\t\t\t\t  that.myMap.openInfoWindow(infoWindow, point); // 开启信息窗口\r\n\t\t\t\t\t\t              },\r\n\t\t\t\t\t              // 绘制带波纹扩散的圆\r\n\t\t\t\t\t              type: 'wave',\r\n\t\t\t\t\t\t\t\t  // 颜色\r\n\t\t\t\t\t\t\t\t  color: 'rgba(43, 106, 200, 1.0)',\r\n\t\t\t\t\t\t\t\t  size: 6,\r\n\t\t\t\t\t              // 扩散半径，支持直接设置和回调两种形式\r\n\t\t\t\t\t              radius: 40,\r\n\t\t\t\t\t              // 周期影响扩散速度，越小越快\r\n\t\t\t\t\t              duration: 1 / 3,\r\n\t\t\t\t\t              // 拖尾影响波纹数，越大越多\r\n\t\t\t\t\t              trail: 3,\r\n\t\t\t\t\t\t\t\t  data: [{\r\n\t\t\t\t\t\t\t\t      geometry: {\r\n\t\t\t\t\t\t\t\t          type: 'Point',\r\n\t\t\t\t\t\t\t\t          coordinates: [109.660568, 28.699781] // 保靖县人民政府\r\n\t\t\t\t\t\t\t\t      }\r\n\t\t\t\t\t\t\t\t  }]\r\n\t\t\t\t\t          });\r\n\t\t\t\t\t  view.addLayer(waveLayer);\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  \r\n\t\t\t          //view.addLayer(waveLayer);\r\n\t\t\t          //layer.setData(data.slice(3, 8));\r\n\t\t\t  \r\n\t\t\t  \r\n\r\n\t\t\t  \r\n\t\t\t  \r\n\t\t\t  \r\n\t\t\t  \r\n\t\t      })\r\n\t\t      .catch((err)=>{\r\n\t\t        console.log(err);\r\n\t\t      })\r\n\t\t\t  \r\n\t\t    },\r\n\t\t\teventTotal() {\r\n\t\t\t\tthis.$message.error('未开发');\r\n\t\t\t},\r\n\t\t\teventDone() {\r\n\t\t\t\tthis.$message.error('未开发');\r\n\t\t\t},\r\n\t\t\teventIng() {\r\n\t\t\t\tthis.$message.error('未开发');\r\n\t\t\t},\r\n\t\t\teventDanger() {\r\n\t\t\t\tthis.$message.error('未开发');\r\n\t\t\t}\r\n\t},\r\n\t}\n</script>\n\n<style>\r\n.allmap {\n  width: 100%;\n  height: 60vh;\n  position: relative;\n  z-index: 1;\n}\r\n.el-progress{\r\n\twidth: 40%;\r\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=2da04e53&\"\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}