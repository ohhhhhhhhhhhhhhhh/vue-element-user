(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ef7e8ae"],{"0aae":function(e,t,r){},"90a5":function(e,t,r){"use strict";r("0aae")},b9f4:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"register-wrapper"},[r("div",{attrs:{id:"register"}},[r("p",{staticClass:"title"},[e._v("注册")]),r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"id"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入身份证号"},model:{value:e.ruleForm2.id,callback:function(t){e.$set(e.ruleForm2,"id",t)},expression:"ruleForm2.id"}})],1),r("el-form-item",{attrs:{prop:"usrname"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.ruleForm2.usrname,callback:function(t){e.$set(e.ruleForm2,"usrname",t)},expression:"ruleForm2.usrname"}})],1),r("el-form-item",{attrs:{prop:"tel"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入手机号",disabled:e.tel_disabled},model:{value:e.ruleForm2.tel,callback:function(t){e.$set(e.ruleForm2,"tel",t)},expression:"ruleForm2.tel"}})],1),r("el-form-item",{staticClass:"code",attrs:{prop:"smscode"}},[r("el-input",{attrs:{placeholder:"验证码"},model:{value:e.ruleForm2.smscode,callback:function(t){e.$set(e.ruleForm2,"smscode",t)},expression:"ruleForm2.smscode"}}),r("el-button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.sendCode}},[e._v(e._s(e.buttonText))])],1),r("el-form-item",{attrs:{prop:"pass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"输入密码"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),r("el-form-item",{attrs:{prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"确认密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v("注册")]),r("p",{staticClass:"login",on:{click:e.gotoLogin}},[e._v("已有账号？立即登录")])],1)],1)],1)])])},o=[],a=(r("bc3a"),r("b775"));function l(e){return Object(a["a"])({url:"/verifyCode",method:"POST",data:e})}function i(e){return Object(a["a"])({url:"/signUp",method:"POST",data:e})}var n={name:"Register",data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请输入手机号码")):e.checkMobile(r)?s():s(new Error("手机号码不合法"))},r=function(t,r,s){""===r?s(new Error("请输入身份证号码")):e.checkIdentity(r)?s():s(new Error("身份证号码不合法"))},s=function(e,t,r){""===t?r(new Error("请输入用户名")):r()},o=function(e,t,r){""===t?r(new Error("请输入手机验证码")):r()},a=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.ruleForm2.checkPass&&e.$refs.ruleForm2.validateField("checkPass"),s())},l=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.ruleForm2.pass?s(new Error("两次输入密码不一致!")):s()};return{ruleForm2:{id:"530124197312202026",usrname:"张三",pass:"123456",checkPass:"123456",tel:"15352236291",smscode:"9527"},rules2:{id:[{validator:r,trigger:"change"}],usrname:[{validator:s,trigger:"change"}],pass:[{validator:a,trigger:"change"}],checkPass:[{validator:l,trigger:"change"}],tel:[{validator:t,trigger:"change"}],smscode:[{validator:o,trigger:"change"}]},buttonText:"发送验证码",isDisabled:!1,flag:!0,tel_disabled:!1}},methods:{sendCode:function(){var e=this,t=this.ruleForm2.tel;if(this.checkMobile(t)){var r={tel:t};l(r).then((function(t){-1!=t.data.code||e.$message.error("手机号已被注册！")})).catch((function(e){console.log(e)})),this.$message.success("已发送请注意查收！");var s=60;if(this.buttonText="已发送",this.isDisabled=!0,this.tel_disabled=!0,this.flag){this.flag=!1;var o=setInterval((function(){s--,e.buttonText=s+" 秒",0===s&&(clearInterval(o),e.buttonText="重新获取",e.isDisabled=!1,e.flag=!0)}),1e3)}}else this.$message.error("请输入手机号！")},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("提交失败！"),!1;setTimeout((function(){var e=t.ruleForm2;i(e).then((function(e){if(-1!==e.data.identity_status)if(-1!==e.data.code_status){var r=t.$notify({title:"注册成功",message:"请登录您的账号！",type:"success"});setTimeout((function(){r.close()}),3e3),t.$router.push("/login")}else t.$message.error("验证码错误！");else t.$message.error("身份证号已被注册！")})).catch((function(e){console.log(e)})),t.$message.success("提交成功！")}),400)}))},gotoLogin:function(){this.$router.push({path:"/login"})},checkMobile:function(e){var t=/^1\d{10}$/;return!!t.test(e)},checkIdentity:function(e){var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2];if(/^\d{17}\d|x$/i.test(e)){for(var s,o=0,a=0;a<e.length-1;a++)o+=parseInt(e.substr(a,1),10)*t[a];return s=o%11,r[s]==e.substr(17,1).toUpperCase()}return!1}}},c=n,u=(r("90a5"),r("2877")),m=Object(u["a"])(c,s,o,!1,null,"29c32f1e",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-1ef7e8ae.9e440da5.js.map