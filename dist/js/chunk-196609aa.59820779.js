(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-196609aa"],{"7df3":function(e,t,n){"use strict";n("a946")},a946:function(e,t,n){},c3b0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{"margin-right":"-6px","margin-top":"-20px"}},[n("el-aside",{attrs:{width:"240px"}},[e._v("Aside")]),n("el-container",[n("el-header",{attrs:{height:"130px"}},[n("div",[n("span",{staticStyle:{display:"flex","margin-bottom":"5px"}},[n("el-popover",{attrs:{placement:"top-start",title:"事件数:",width:"200",trigger:"hover"}},[n("span",[e._v("事件总数："+e._s(this.numTotal))]),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",size:"mini",type:"primary"},nativeOn:{click:function(t){return e.eventTotal()}},slot:"reference"},[e._v("事件数")])],1),this.loading?n("el-progress",{attrs:{percentage:this.percTotal}}):e._e()],1),n("span",{staticStyle:{display:"flex","margin-bottom":"5px"}},[n("el-popover",{attrs:{placement:"top-start",title:"已解决:",width:"200",trigger:"hover"}},[n("span",[e._v("已解决事件数："+e._s(this.numDone)),n("br"),e._v("占比："+e._s(this.percDone.toFixed(1))+"%")]),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",size:"mini",type:"success"},nativeOn:{click:function(t){return e.eventDone()}},slot:"reference"},[e._v("已解决")])],1),this.loading?n("el-progress",{attrs:{percentage:this.percDone,status:"success"}}):e._e()],1),n("span",{staticStyle:{display:"flex","margin-bottom":"5px"}},[n("el-popover",{attrs:{placement:"top-start",title:"处理中:",width:"200",trigger:"hover"}},[n("span",[e._v("待解决处理中："+e._s(this.numIng)),n("br"),e._v("占比："+e._s(this.percIng.toFixed(1))+"%")]),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",size:"mini",type:"warning"},nativeOn:{click:function(t){return e.eventIng()}},slot:"reference"},[e._v("处理中")])],1),this.loading?n("el-progress",{attrs:{percentage:this.percIng,status:"warning"}}):e._e()],1),n("span",{staticStyle:{display:"flex","margin-bottom":"5px"}},[n("el-popover",{attrs:{placement:"top-start",title:"升级数:",width:"200",trigger:"hover"}},[n("span",[e._v("事件升级数："+e._s(this.numDanger)),n("br"),e._v("占比："+e._s(this.percDanger.toFixed(1))+"%")]),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",size:"mini",type:"danger"},nativeOn:{click:function(t){return e.eventDanger()}},slot:"reference"},[e._v("升级数")])],1),this.loading?n("el-progress",{attrs:{percentage:this.percDanger,status:"exception"}}):e._e()],1)])]),n("el-main",[n("div",{staticClass:"map"},[n("div",{ref:"map",staticClass:"allmap",attrs:{id:"map_container"}})])]),n("el-footer",{attrs:{height:"100px"}},[e._v("Footer")])],1)],1)},r=[];function o(e){return new Promise((function(t,n){window.init=function(){t(BMapGL)};var a=document.createElement("script");a.type="text/javascript",a.src="http://api.map.baidu.com/api?v=1.0&type=webgl&ak=".concat(e,"&callback=init"),a.onerror=n,document.head.appendChild(a)}))}var i=n("b775");function s(){return Object(i["a"])({url:"/getEvents",method:"GET"})}var c={data:function(){return{loading:!1,percDanger:0,percDone:0,percIng:0,percTotal:100,numDanger:0,numDone:0,numIng:0,numTotal:0,windowInfo:"正在加载中，请稍等...",color:"",ak:"rQxHPQX1ua21rWnXzTbUh5KSSUbnefxR",myMap:null}},created:function(){var e=this;s().then((function(t){e.numDanger=t.data.danger,e.numDone=t.data.done,e.numIng=t.data.ing,e.numTotal=e.numDanger+e.numDone+e.numIng,e.percDanger=e.numDanger/e.numTotal*100,e.percDone=e.numDone/e.numTotal*100,e.percIng=e.numIng/e.numTotal*100,e.loading=!0,e.percDanger>4?(e.color="red",e.windowInfo="警告：当前事件升级数占比超过4%"):e.percDone>60?(e.color="green",e.windowInfo="当前事件解决率已达到60%"):e.percIng<45?(e.color="blue",e.windowInfo="当前事件较平稳"):(e.color="yellow",e.windowInfo="当前待处理事件较多，超过45%"),e.initMap()})).catch((function(e){console.log(e)}))},mounted:function(){},beforeRouteLeave:function(e,t,n){this.myMap.destroy(),this.myMap=null,this.loading=!1,n()},methods:{initMap:function(){var e=this;o(this.ak).then((function(t){e.myMap=new t.Map("map_container",{minZoom:10,maxZoom:12});var n=new t.Point(109.66049,28.69997);e.myMap.centerAndZoom(n,11),e.myMap.enableScrollWheelZoom(!0),e.myMap.setHeading(64.5),e.myMap.setTilt(30);var a=new t.Boundary,r=e;a.get("保靖县",(function(e){var n=new t.Polygon(e.boundaries,{fillColor:r.color,fillOpacity:.2});r.myMap.addOverlay(n)}));var o={width:200,height:80,title:"保靖县"},i=new t.InfoWindow(e.windowInfo,o);e.myMap.openInfoWindow(i,n);var s=new mapvgl.View({map:e.myMap}),c=new mapvgl.CircleLayer({enablePicked:!0,selectedColor:"#df4d8c",autoSelect:!0,onClick:function(e){r.myMap.openInfoWindow(i,n)},type:"wave",color:"rgba(43, 106, 200, 1.0)",size:6,radius:40,duration:1/3,trail:3,data:[{geometry:{type:"Point",coordinates:[109.660568,28.699781]}}]});s.addLayer(c)})).catch((function(e){console.log(e)}))},eventTotal:function(){this.$message.error("未开发")},eventDone:function(){this.$message.error("未开发")},eventIng:function(){this.$message.error("未开发")},eventDanger:function(){this.$message.error("未开发")}}},l=c,p=(n("7df3"),n("2877")),u=Object(p["a"])(l,a,r,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-196609aa.59820779.js.map